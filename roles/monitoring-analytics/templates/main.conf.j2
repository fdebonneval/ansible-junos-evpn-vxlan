/* This block of configuration has been generated by the role monitoring-analytics for Ansible */
{% if analytics is defined %}
services {
    analytics {
        export-profiles {
            ANALYTICS_EXPORT_PROFILE {
                stream-format json;
                interface {
                    information;
                    statistics {
                        traffic;
                        queue;
                    }
                    status {
                        link;
                        traffic;
                        queue;
                    }
                }
                system {
                    information;
                    status {
                        traffic;
                        queue;
                    }
                }
            }
        }
        resource-profiles {
            ANALYTICS_RES_PROFILE {
                queue-monitoring;
                traffic-monitoring;
                depth-threshold high 1000000 low 300000;
            }
        }
{% if analytics.interfaces|length > 0  %}
        resource {
            interfaces {
{% for interface in analytics.interfaces %}
                {{ interface.name }} {
                    resource-profile ANALYTICS_RES_PROFILE;
                }
{% endfor %}
            }
        }
{% endif %}
        collector {
            address {{analytics.collector}} {
                port {{analytics.collector_port}} {
                    transport udp {
                        export-profile ANALYTICS_EXPORT_PROFILE;
                    }
                }
            }
        }
    }
}
{% endif %}