/* This block of configuration has been generated by the role monitoring-analytics for Ansible */
{% if mirror is defined or analyzer is defined %}
forwarding-options {
{% if mirror is defined %}
/* For mirroring you have to define input filter and assign it to access interface */
    port-mirroring {
        instance {
            PORT_MIRROR {
                family inet {
                    output {
                        ip-address {{mirror.destination_ip}};
                    }
                }
            }
        }
    }
{% endif %}
{% if analyzer is defined %}
    analyzer {
        ANALYZER {
{% if analyzer.interfaces|length > 0  %}
            input {
                ingress {
{% for interface in analyzer.interfaces %}
                    interface {{interface.name}};
{% endfor %}
                }
                egress {
{% for interface in analyzer.interfaces %}
                    interface {{interface.name}};
{% endfor %}
                }
            }
{% endif %}
            output {
                ip-address {{analyzer.destination_ip}};
            }
        }
    }
{% endif %}
}
{% endif %}